<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC-8801 スタートレック ゲーム仕様書</title>
    <style>
        :root {
            --bg-color: #0a0a0a;
            --text-color: #00ff00;
            --border-color: #00aa00;
            --header-bg: #001a00;
            --table-hover: #002200;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Courier New', Consolas, monospace;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        h1, h2, h3 {
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }

        h1 {
            text-align: center;
            font-size: 2em;
            text-shadow: 0 0 10px var(--text-color);
        }

        h2 {
            margin-top: 40px;
            color: #00ffaa;
        }

        h3 {
            color: #aaffaa;
            border-bottom: 1px dashed var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 10px 15px;
            text-align: left;
        }

        th {
            background-color: var(--header-bg);
            color: #00ffff;
        }

        tr:hover {
            background-color: var(--table-hover);
        }

        code, pre {
            background-color: #001500;
            border: 1px solid var(--border-color);
            border-radius: 4px;
        }

        code {
            padding: 2px 6px;
            color: #ffff00;
        }

        pre {
            padding: 15px;
            overflow-x: auto;
            line-height: 1.4;
        }

        .symbol {
            color: #ffff00;
            font-weight: bold;
        }

        .command {
            color: #00ffff;
            font-weight: bold;
        }

        .section-box {
            border: 1px solid var(--border-color);
            padding: 20px;
            margin: 20px 0;
            background-color: #000800;
        }

        .screen-mock {
            background-color: #000000;
            border: 3px solid #333;
            padding: 20px;
            font-size: 14px;
            line-height: 1.3;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }

        .condition-green { color: #00ff00; }
        .condition-yellow { color: #ffff00; }
        .condition-red { color: #ff0000; }
        .condition-docked { color: #00ffff; }

        .note {
            background-color: #001a00;
            border-left: 4px solid #00ffaa;
            padding: 10px 15px;
            margin: 15px 0;
        }

        footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            text-align: center;
            font-size: 0.9em;
            color: #008800;
        }

        a {
            color: #00aaff;
        }

        a:hover {
            color: #00ffff;
        }
    </style>
</head>
<body>

<h1>PC-8801 スタートレック ゲーム仕様書</h1>

<h2>1. ゲーム概要</h2>

<table>
    <tr>
        <th>項目</th>
        <th>内容</th>
    </tr>
    <tr>
        <td>ジャンル</td>
        <td>テキストベース・戦略シミュレーション</td>
    </tr>
    <tr>
        <td>起源</td>
        <td>1971年 Mike Mayfield作（Sigma7 BASIC）</td>
    </tr>
    <tr>
        <td>目的</td>
        <td>制限日数内に全クリンゴン艦を撃破し、惑星連邦を守る</td>
    </tr>
    <tr>
        <td>プレイヤー役割</td>
        <td>宇宙船エンタープライズ号の艦長</td>
    </tr>
</table>

<h2>2. 銀河マップ構造</h2>

<div class="section-box">
<pre>
銀河系 (Galaxy)
└── 8×8 クオドラント (Quadrant) = 64区画
    └── 各クオドラント内に 8×8 セクター (Sector) = 64マス
</pre>
</div>

<ul>
    <li>銀河系は <strong>64クオドラント</strong>で構成</li>
    <li>各クオドラントは <strong>64セクター</strong>を含む</li>
    <li>ゲーム開始時にクリンゴン、スターベース、星がランダム配置される</li>
    <li>クオドラント間の移動にはワープエンジンを使用</li>
    <li>セクター間の移動にはインパルスエンジンを使用</li>
</ul>

<h2>3. シンボル一覧</h2>

<table>
    <tr>
        <th>シンボル</th>
        <th>代替表記</th>
        <th>意味</th>
        <th>説明</th>
    </tr>
    <tr>
        <td class="symbol">&lt;*&gt;</td>
        <td class="symbol">E</td>
        <td>エンタープライズ号</td>
        <td>プレイヤーが操作する宇宙船</td>
    </tr>
    <tr>
        <td class="symbol">+K+</td>
        <td class="symbol">K</td>
        <td>クリンゴン艦</td>
        <td>敵艦。撃破対象</td>
    </tr>
    <tr>
        <td class="symbol">&gt;!&lt;</td>
        <td class="symbol">B</td>
        <td>スターベース</td>
        <td>補給基地。ドッキングで回復</td>
    </tr>
    <tr>
        <td class="symbol">*</td>
        <td class="symbol">*</td>
        <td>星</td>
        <td>障害物。魚雷を遮る</td>
    </tr>
    <tr>
        <td class="symbol">.</td>
        <td class="symbol">(空白)</td>
        <td>空白セクター</td>
        <td>何もない宇宙空間</td>
    </tr>
</table>

<h2>4. コマンド一覧</h2>

<table>
    <tr>
        <th>コマンド</th>
        <th>機能</th>
        <th>詳細説明</th>
    </tr>
    <tr>
        <td class="command">NAV</td>
        <td>航行</td>
        <td>コース(1-9)とワープ速度を指定して移動。エネルギーを消費する。</td>
    </tr>
    <tr>
        <td class="command">SRS</td>
        <td>短距離センサー</td>
        <td>現在クオドラントの8×8セクターを表示。敵や星の位置を確認。</td>
    </tr>
    <tr>
        <td class="command">LRS</td>
        <td>長距離センサー</td>
        <td>周囲9クオドラントの情報を3桁数字で表示。</td>
    </tr>
    <tr>
        <td class="command">PHA</td>
        <td>フェーザー砲</td>
        <td>エネルギーを消費して全敵を自動照準攻撃。距離により威力減衰。</td>
    </tr>
    <tr>
        <td class="command">TOR</td>
        <td>光子魚雷</td>
        <td>方向を指定して発射。最大10発。高威力だが外れる可能性あり。</td>
    </tr>
    <tr>
        <td class="command">SHE</td>
        <td>シールド</td>
        <td>エネルギーをシールドに配分。敵の攻撃から艦を守る。</td>
    </tr>
    <tr>
        <td class="command">DAM</td>
        <td>損害報告</td>
        <td>各システムの損傷状況と修理時間を表示。</td>
    </tr>
    <tr>
        <td class="command">COM</td>
        <td>コンピュータ</td>
        <td>銀河記録、状況報告、敵座標計算など6つの機能を持つ。</td>
    </tr>
    <tr>
        <td class="command">XXX</td>
        <td>ゲーム終了</td>
        <td>ゲームを終了する。</td>
    </tr>
</table>

<h3>4.1 コンピュータ（COM）のサブコマンド</h3>

<table>
    <tr>
        <th>番号</th>
        <th>機能</th>
    </tr>
    <tr>
        <td>0</td>
        <td>銀河に関する全記録（累積マップ）</td>
    </tr>
    <tr>
        <td>1</td>
        <td>状況報告</td>
    </tr>
    <tr>
        <td>2</td>
        <td>光子魚雷の攻撃データ（敵への方向計算）</td>
    </tr>
    <tr>
        <td>3</td>
        <td>スターベースへの航行データ</td>
    </tr>
    <tr>
        <td>4</td>
        <td>方位／距離計算機</td>
    </tr>
    <tr>
        <td>5</td>
        <td>銀河領域名マップ</td>
    </tr>
</table>

<h3>4.2 コース方向（NAV / TOR コマンド用）</h3>

<div class="section-box">
<pre>
        4   3   2
          ↖ ↑ ↗
      5 ←   E   → 1
          ↙ ↓ ↘
        6   7   8

    ※ 1-8の整数、または小数で中間方向も指定可能
    ※ 9 = 1 と同じ（360度で一周）
</pre>
</div>

<h2>5. リソース管理</h2>

<table>
    <tr>
        <th>リソース</th>
        <th>初期値</th>
        <th>用途</th>
        <th>補給方法</th>
    </tr>
    <tr>
        <td>エネルギー</td>
        <td>3000</td>
        <td>移動、フェーザー、シールド</td>
        <td>スターベースでドッキング</td>
    </tr>
    <tr>
        <td>光子魚雷</td>
        <td>10発</td>
        <td>敵艦への直接攻撃</td>
        <td>スターベースでドッキング</td>
    </tr>
    <tr>
        <td>シールド</td>
        <td>0</td>
        <td>防御（ダメージ吸収）</td>
        <td>エネルギーから配分（SHEコマンド）</td>
    </tr>
</table>

<div class="note">
    <strong>ドッキング時の回復:</strong><br>
    スターベースに隣接するとドッキング状態になり、エネルギー3000、魚雷10発に回復。
    損傷したシステムの修理も可能。
</div>

<h2>6. 長距離センサー（LRS）の読み方</h2>

<div class="section-box">
<pre>
3桁数字: KBS

  K = クリンゴン数  (百の位)
  B = スターベース数 (十の位)
  S = 星の数       (一の位)

例: 215 = クリンゴン2隻、スターベース1基、星5個
例: 007 = クリンゴン0、スターベース0、星7個
例: 103 = クリンゴン1隻、スターベース0、星3個
</pre>
</div>

<h2>7. 状況（CONDITION）</h2>

<table>
    <tr>
        <th>状況</th>
        <th>表示色</th>
        <th>条件</th>
    </tr>
    <tr>
        <td class="condition-green">GREEN</td>
        <td>緑</td>
        <td>クオドラント内に敵なし</td>
    </tr>
    <tr>
        <td class="condition-yellow">YELLOW</td>
        <td>黄</td>
        <td>エネルギーが10%以下</td>
    </tr>
    <tr>
        <td class="condition-red">RED</td>
        <td>赤</td>
        <td>クオドラント内にクリンゴンあり</td>
    </tr>
    <tr>
        <td class="condition-docked">DOCKED</td>
        <td>青</td>
        <td>スターベースにドッキング中</td>
    </tr>
</table>

<h2>8. 勝利・敗北条件</h2>

<h3>勝利条件</h3>
<ul>
    <li>制限日数内に全クリンゴン艦を撃破する</li>
</ul>

<h3>敗北条件</h3>
<ul>
    <li>制限日数を超過</li>
    <li>エネルギーが枯渇（0以下）</li>
    <li>エンタープライズ号が破壊される</li>
    <li>全スターベースが破壊される（一部バージョン）</li>
</ul>

<h3>スコア計算</h3>
<div class="section-box">
<pre>
RATING = (撃破クリンゴン総数 ÷ 経過日数) × 1000
</pre>
</div>

<h2>9. ダメージシステム</h2>

<p>戦闘中に各システムが損傷する可能性があります：</p>

<table>
    <tr>
        <th>システム</th>
        <th>損傷時の影響</th>
    </tr>
    <tr>
        <td>ワープエンジン</td>
        <td>クオドラント間移動不可または速度制限</td>
    </tr>
    <tr>
        <td>短距離センサー</td>
        <td>SRSコマンド使用不可</td>
    </tr>
    <tr>
        <td>長距離センサー</td>
        <td>LRSコマンド使用不可</td>
    </tr>
    <tr>
        <td>フェーザー</td>
        <td>PHAコマンド使用不可</td>
    </tr>
    <tr>
        <td>光子魚雷</td>
        <td>TORコマンド使用不可</td>
    </tr>
    <tr>
        <td>シールド制御</td>
        <td>SHEコマンド使用不可</td>
    </tr>
    <tr>
        <td>コンピュータ</td>
        <td>COMコマンド使用不可</td>
    </tr>
    <tr>
        <td>インパルスエンジン</td>
        <td>セクター内移動制限</td>
    </tr>
</table>

<div class="note">
    <strong>修理方法:</strong><br>
    ・時間経過で自動修理（ゆっくり）<br>
    ・スターベースでドッキングして修理（即時）
</div>

<h2>10. 画面設計イメージ</h2>

<div class="screen-mock">
<pre>
================================================================================
                         STAR TREK - PYTHON EDITION
================================================================================
STARDATE: 2512.5    TIME LEFT: 25 DAYS    KLINGONS: 12    STARBASES: 3

QUADRANT: ANTARES IV  [3,5]              CONDITION: <span class="condition-red">RED</span>
--------------------------------------------------------------------------------
SHORT RANGE SENSORS:
    1   2   3   4   5   6   7   8
  +---+---+---+---+---+---+---+---+
1 | . | . | * | . | . | . | . | . |
2 | . |+K+| . | . | . | * | . | . |
3 | . | . | . |&lt;*&gt;| . | . | . | . |
4 | . | * | . | . | . |+K+| . | . |
5 | . | . | . | . | . | . | . | . |
6 | . | . |&gt;!&lt;| . | . | . | * | . |
7 | . | . | . | . | . | . | . | . |
8 | * | . | . | . | . | . | . | * |
  +---+---+---+---+---+---+---+---+

LONG RANGE SENSORS:              STATUS:
+-----+-----+-----+               ENERGY:    2450
| 003 | 105 | 000 |               SHIELDS:    500
+-----+-----+-----+               TORPEDOES:    8
| 014 | 207 | 102 |               DAMAGE:    NONE
+-----+-----+-----+
| 000 | 006 | 000 |
+-----+-----+-----+

--------------------------------------------------------------------------------
COMMANDS: NAV  SRS  LRS  PHA  TOR  SHE  DAM  COM  XXX
COMMAND? _
================================================================================
</pre>
</div>

<h3>10.1 画面構成</h3>

<table>
    <tr>
        <th>エリア</th>
        <th>内容</th>
    </tr>
    <tr>
        <td>ヘッダー</td>
        <td>現在の星日、残り日数、残りクリンゴン数、スターベース数</td>
    </tr>
    <tr>
        <td>クオドラント情報</td>
        <td>現在位置の名前と座標、状況（GREEN/YELLOW/RED/DOCKED）</td>
    </tr>
    <tr>
        <td>短距離センサー</td>
        <td>8×8セクターマップ（現在のクオドラント内）</td>
    </tr>
    <tr>
        <td>長距離センサー</td>
        <td>3×3の周囲クオドラント情報（3桁数字）</td>
    </tr>
    <tr>
        <td>ステータス</td>
        <td>エネルギー、シールド、魚雷数、損傷状況</td>
    </tr>
    <tr>
        <td>コマンド入力</td>
        <td>プロンプトでコマンド受付</td>
    </tr>
</table>

<h2>11. ゲームフロー</h2>

<div class="section-box">
<pre>
┌─────────────────┐
│   ゲーム開始     │
│  銀河系生成      │
└────────┬────────┘
         ▼
┌─────────────────┐
│  ミッション説明   │
│ 敵数・日数表示    │
└────────┬────────┘
         ▼
┌─────────────────┐◄──────────────────┐
│  コマンド入力     │                   │
└────────┬────────┘                   │
         ▼                            │
┌─────────────────┐                   │
│  コマンド実行     │                   │
│  (移動/攻撃等)   │                   │
└────────┬────────┘                   │
         ▼                            │
┌─────────────────┐                   │
│  敵ターン        │                   │
│  (反撃)         │                   │
└────────┬────────┘                   │
         ▼                            │
    ┌────┴────┐                       │
    │ 判定    │                       │
    └────┬────┘                       │
         │                            │
    ┌────┼────┬────────┐              │
    ▼    ▼    ▼        ▼              │
  勝利  敗北  継続 ────────────────────┘
</pre>
</div>

<h2>参考資料</h2>

<ul>
    <li><a href="https://startrek-mania.fandom.com/ja/wiki/スタートレック_(マイコンゲーム)">スタートレック (マイコンゲーム) - Star Trekマニア Wiki</a></li>
    <li><a href="https://github.com/philspil66/Super-Star-Trek">GitHub - Super Star Trek 1978 BASIC Source</a></li>
    <li><a href="https://coding-horror.github.io/basic-computer-games/84_Super_Star_Trek/javascript/index.html">Super Star Trek - Coding Horror BASIC Games</a></li>
</ul>

<footer>
    PC-8801 スタートレック ゲーム仕様書<br>
    Python移植プロジェクト用ドキュメント
</footer>

</body>
</html>
